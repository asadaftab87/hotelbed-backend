Hotel Data Processing Project
Documentation
Reference API
ğŸ”— Hotelbeds Cache API Documentation
1. EXISTING FLOW (ALREADY IMPLEMENTED)
1.1 Full API Data Download
â—
The Full API endpoint is triggered once per day at 12:00 PM (noon).
The API returns a ZIP file (up to 700 MB) which is downloaded into:
/project-root/downloads/
â—
â—
The downloaded ZIP is saved with a timestamp-based name for version tracking.
1.2 Extraction Process
â—
The downloaded ZIP file is extracted automatically.
â—
Extracted data size: 15â€“20 GB.
â—
Extraction produces two main folders:
â—‹
general
â—‹
destination
1.3 Destination Folder Structure
â—
Inside the destination folder, data is organized by country codes (e.g., AYT,
DXB, etc.).
Each country folder contains multiple files with sample data like:
{CNHA}
DBT:ST:2:2:2:2:0
DUS:ST:1:1:1:1:0
{/CNHA}
â—
â—
Data is parsed using the â€œ:
`â€ delimiter to separate fields.
1.4 Data Parsing and CSV Generation
â—
The parsed data is separated into multiple tables, such as:
â—‹
rates
â—‹
rooms
â—‹
hotels
â—‹
prices
â—
Each tableâ€™s data is exported to a CSV file for easy import and storage.
1.5 Upload to S3
â—
All generated CSV files are uploaded to AWS S3 in organized folders.
â—
The S3 structure mirrors the local folder structure for consistency.
1.6 Database Import
â—
The CSV data from S3 is imported into the Aurora MySQL Cluster.
â—
The import process is already automated and verified.
1.7 Cron Job Configuration
Process API Type Frequency Time
Full Data Sync /full API Once per
day
12:00 PM
Every hour â€”
Update Sync /update
API
2. NEW TASKS (TO BE IMPLEMENTED)
2.1 Duplicate Record Handling
â—
Before generating CSV files, detect and skip duplicate records.
â—
Duplicates should not be included in the CSV or uploaded to S3.
2.2 S3 Role Permission Update
â—
Update the IAM Role for S3 access:
â—‹
Grant read and write access to the Aurora MySQL (RDS) service.
â—‹
This ensures smooth import/export between S3 and RDS.
2.3 Update API Flow
â—
â—
Steps:
The Update API flow will be a copy-paste implementation of the Full API flow.
1. Trigger the Update API every hour (via cron).
2. Download the ZIP file.
â—
3. Extract it.
4. Parse data using the same field mapping as the Full API.
5. Generate CSV files.
6. Upload to S3.
7. Import into the Aurora database.
The only difference is that this process will update existing data instead of
performing a full data replacement.
2.4 Price Calculation Process (Already Completed)
â—
The Price Calculation module is developed and implemented.
â—
It stores each hotelâ€™s:
â—‹
Cheapest available price
â—‹
Complete hotel information
â—‹
Room details
â—‹
Country and availability data
â—
Current status:
â—‹
â—‹
âœ… Development completed
ğŸ§ª Pending: Testing and fixing small bugs before final release
3. Summary
Category Description
Existing
Work
Full API flow (download â†’ extract â†’ parse â†’ CSV â†’ S3 â†’ Aurora
import) is already complete and functional.
New Work Add duplicate record skipping, update S3 â†’ RDS permissions, implement
Update API flow (same as Full API).
Testing
Work
Cron Jobs Price calculation process completed; needs testing and small bug fixes.
/full API â†’ daily at 12 PM; /update API â†’ hourly.